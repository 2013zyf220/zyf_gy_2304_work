states
source("~/.active-rstudio-document")
View(data)
View(data)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(a1)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
install.packages("car")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(my_data)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(data)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(data)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(data)
View(data)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(fit)
View(fit)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(a1)
View(fit)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(fit)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
View(a1)
View(a1)
View(a1)
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
install.packages("PerformanceAnalytics")
source("E:/zyf_gn/zyf_gn_temp/temp_2023_0924.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
View(data)
View(data)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
summary(data_1)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
View(data_1)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
View(data_1)
View(data_2)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
View(data_2)
View(student_data)
View(student_data)
View(student_data)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
View(data_2)
View(data_2)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第1讲 初始R studio.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
summary(model)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(model)
View(model)
View(model)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(model)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(model)
View(model)
View(model)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(model)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(model_anova)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(anova_f)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
confint(model)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(predict_v1)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(conf_interval)
View(conf_interval)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(x_1)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(conf_interval)
source("E:/zyf_gy/zyf_gy_temp/第2讲 简单线性回归temp.R")
source("E:/zyf_gy/zyf_gy_temp/第2讲 简单线性回归temp.R")
source("E:/zyf_gy/zyf_gy_temp/第2讲 简单线性回归temp.R")
source("E:/zyf_gy/zyf_gy_temp/第2讲 简单线性回归temp.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP3.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP3.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP3.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
View(predict_v1)
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
View(mtcars)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
View(mtcars)
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
View(mtcars)
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
source("C:/Users/zyf20/Downloads/第2讲 简单线性回归TEMP2.R")
View(results)
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
source("E:/zyf_gy/zyf_gy_2304_work/工具/R语言相关/R油管教程/第2讲 简单线性回归.R")
hist_1b_v <- matrix(-9999, nrow = year_len, ncol = 8);
year_s <- 2018 #to_be_set
year_e <- 2019 #to_be_set
year_len <- year_e - year_s + 1
hist_1b_v <- matrix(-9999, nrow = year_len, ncol = 8);
View(hist_1b_v)
#=================================================================
set.seed(1)
rf.train <- randomForest(as.factor(Species) ~., data = trainset, importance = TRUE, na.action = na.pass)
#refer to: https://www.bilibili.com/video/BV1tV41117cU/?spm_id_from=333.337.search-card.all.click&vd_source=5ead28bbf00e6798e790cb439bf6f631
library(pacman)
#setwd('E:/zyf_gn/zyf_gn_2301_data/ppa_2301_k2');
p_load(randomForest, caret, pROC)
data('iris')
summary(iris)
#dim(iris)
trainlist <- createDataPartition(iris$Species, p = 0.8, list = FALSE)
trainset <- iris[trainlist,]
testset <- iris[-trainlist,]
#dim(trainset)
#=================================================================
set.seed(1)
rf.train <- randomForest(as.factor(Species) ~., data = trainset, importance = TRUE, na.action = na.pass)
rf.train
source("~/.active-rstudio-document")
installed.packages(skimr)
installed.packages('skimr')
library(skimr)
installed.packages('skimr')
installed.packages('skimr')
library(DataExplorer)
installed.packages('DataExplorer')
installed.packages('caret')
installed.packages('caret')
source("~/.active-rstudio-document")
plot(grid_1b)
grid_1b = vect('E:/zyf_gy/zyf_gy_temp/LC09_L2SP_128039_20230908_20230913_02_T1_ST_B10.TIF'); #to_be_set
grid_1b = raster('E:/zyf_gy/zyf_gy_temp/LC09_L2SP_128039_20230908_20230913_02_T1_ST_B10.TIF'); #to_be_set
plot(grid_1b)
View(grid_1b)
grid_2 <- grid_1b * 2 + 35
plot(grid_2)
grid_2 <- grid_1b * 0.00341802 + 149 - 273.15
plot(grid_2)
grid_1 = raster('E:/zyf_gy/zyf_gy_temp/LC09_L2SP_128039_20230908_20230913_02_T1_ST_B10.TIF'); #to_be_set
plot(grid_1)
grid_2 <- projectRaster(grid_1, '+init=epsg:4326')
grid_2 <- projectRaster(grid_1, crs = '+init=epsg:4326')
grid_1 = raster('E:/zyf_gy/zyf_gy_temp/LC09_L2SP_128039_20230908_20230913_02_T1_ST_B10_rep.TIF'); #to_be_set
plot(grid_1)
new_extent <- extent(xmin = 106.3, xmax = 107, ymin = 29.3, ymax = 30)
library(raster)
new_extent <- extent(xmin = 106.3, xmax = 107, ymin = 29.3, ymax = 30)
new_extent <- extent(xmin = 106.3, xmax = 107, ymin = 29.3, ymax = 30)
new_extent <- extent(106.3,107, 29.3, 30)
grid_2 <- crop(grid_1, new_extent)
plot(grid_2)
grid_3 <- grid_2 * 0.00341802 +149 - 273.15
plot(grid_2)
plot(grid_3)
plot(raster_data, col = color_palette(100))
color_palette <- colorRampPalette(c("blue", "red"))
plot(raster_data, col = color_palette(100))
plot(grid_3, col = color_palette(100))
source("E:/zyf_gy/zyf_gy_2304_work/tool_codes_k1/R_lesson_machine_learning_2023a/BRT_2_v1_ing2023_1105.R")
library(MASS)
library(gbm)
library(randomForest)
library(skimr)
library(DataExplorer)
library(tidyverse)
library(caret)
library(pROC)
index_y_sel <- 'rx_rci'; #to_be_set
col_values_f <- function(f_mat, f_col_name){
if (f_col_name %in% colnames(f_mat)) {
col_index <- which(colnames(f_mat) == f_col_name)  # Find the column index
col_values <- f_mat[, col_index]  # Extract the column values
return(col_values)
} else {
cat("Column name not found in the matrix.")
return(NULL)
}
}
data_1 <- read.csv('E:/zyf_gn/zyf_gn_2301_data/ppa_2301_k2/shp/outputs2/2301_river_6_2021.csv'); #to_be_set
data_2 <- data_1[,c(3,7,16,18,20,22,33,34,35,48)] #to_be_set
skim(data_2) #鸟瞰数据
plot_missing(data_2) #数据缺失状况
data_2v <- col_values_f(data_2, index_y_sel)
hist(data_2v, breaks = 50) #to_be_set #对因变量做直方图
#分类数据
set.seed(1)
trains <- createDataPartition(y = data_2v, p = 0.75, list = F); #to_be_set #基于因变量拆分
train_data <- data_2[trains, ]
test_data <- data_2[-trains, ]
train_data_v <- col_values_f(train_data, index_y_sel)
test_data_v <- col_values_f(test_data, index_y_sel)
hist(train_data_v, breaks = 50) #to_be_set
hist(test_data_v, breaks = 50) #to_be_set
colnames(data_2) #get the column names of data_2
#构建公式
col_ext <- c(1, 2, 3, 4, 5, 6, 10) #to_be_set
form_reg <- as.formula(paste0(index_y_sel,' ~', paste(colnames(train_data)[col_ext], collapse = ' + '))) #to_be_set #as.formula(): 将字符串转换成公式
form_reg
set.seed(123)
fit_1 <- gbm(form_reg, data = train_data, verbose = TRUE, shrinkage = 0.01, interaction.depth = 3,
n.minobsinnode = 5, n.trees = 5000, cv.folds = 10)
print(fit_1)
summary(fit_1)
perf_gbm1 = gbm.perf(fit_1, method = "cv")
perf_gbm1
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
# Load the required packages
library(raster)
library(sf)
# Specify the path to your shapefile (replace "your_shapefile.shp" with the actual file name)
shapefile_path <- 'E:/zyf_gy/zyf_gy_temp/temp22.tif'
# Read the shapefile using sf
sf_object <- st_read(shapefile_path)
# Specify the path to your shapefile (replace "your_shapefile.shp" with the actual file name)
shapefile_path <- 'E:/zyf_gy/zyf_gy_temp/bh_1.shp'
# Read the shapefile using sf
sf_object <- st_read(shapefile_path)
# Create an empty raster layer with the desired extent and resolution
# You can customize the extent and resolution based on your data
raster_layer <- raster(extent(sf_object), res = c(0.1, 0.1))
# Use rasterize to transfer values from sf_object$a1 to the raster layer
rasterized_layer <- rasterize(sf_object, raster_layer, field = "ZL")
# Use rasterize to transfer values from sf_object$a1 to the raster layer
rasterized_layer <- rasterize(sf_object, raster_layer, field = "zl")
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
install.packages("rgdal")
install.packages("raster")
source("~/.active-rstudio-document")
library(raster)
library(rgdal)
shapefile_path <- 'E:/zyf_gy/zyf_gy_temp/temp4.shp'
s1 <- readOGR(dsn = shapefile_path, layer = basename(shapefile_path), stringsAsFactors = FALSE)
s1 <- st_read(dsn = shapefile_path, layer = basename(shapefile_path), stringsAsFactors = FALSE)
s1 <- st_read(shapefile_path)
r1 <- raster(s1, layer = "a1")
shapefile_path <- 'E:/zyf_gy/zyf_gy_temp/temp24.tif'
s1 <- raster(shapefile_path)
plot(s1)
library(raster)
shape = shapefile("E:/zyf_gy/zyf_gy_temp/temp4.shp")
r = raster(shape, res=0.05)
plot(r)
shape_r = rasterize(shape, r, 1)
plot(r)
plot(shape_r)
plot(shape,add=T)
plot(shape_r)
library(raster)
shape = shapefile("E:/zyf_gy/zyf_gy_temp/temp4.shp")
r = raster(shape, res=0.001)
shape_r = rasterize(shape, r, 'zl')
shape_r = rasterize(shape, r, 'ZL')
plot(shape,add=T)
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
library(raster)
shape = shapefile("E:/zyf_gy/zyf_gy_temp/temp4.shp")
r = raster(shape, res=0.01)
shape_r = rasterize(shape, r, 2)
plot(shape_r)
writeRaster(shape_r, "E:/zyf_gy/zyf_gy_temp/output.tif", format="Tiff")
writeRaster(shape_r, "E:/zyf_gy/zyf_gy_temp/output.tif", format="GTiff")
writeRaster(shape_r, "E:/zyf_gy/zyf_gy_temp/output.tif")
writeRaster(shape_r, "E:/zyf_gy/zyf_gy_temp/output.tif")
shape = shapefile("E:/zyf_gy/zyf_gy_temp/temp4.shp")
r = raster(shape, res=0.00001)
shape_r = rasterize(shape, r, 2)
plot(shape_r)
plot(shape,add=T)
shape_r = rasterize(shape, r, 'zl')
shape_r = rasterize(shape, r, 'ZL')
shape_r = rasterize(shape, r, zl)
source("~/.active-rstudio-document")
shape_r = rasterize(shape, r, "ID_2")
plot(shape_r)
plot(shape,add=T)
shape_r = rasterize(shape, r, "zl")
library(raster)
shape = shapefile("E:/zyf_gy/zyf_gy_temp/temp4.shp")
r = raster(shape, res=0.00001)
shape_r = rasterize(shape, r, "zl")
plot(shape,add=T)
plot(shape,add=T)
library(raster)
shape = shapefile("E:/zyf_gy/zyf_gy_temp/temp4.shp")
shape_r = rasterize(shape, r, zl)
"
shape_r = rasterize(shape, r, "zl")
shape_r = rasterize(shape, r, "zl")
shape = shapefile("E:/zyf_gy/zyf_gy_temp/temp4.shp")
r = raster(shape, res=0.00001)
shape_r = rasterize(shape, r, "zl")
source("~/.active-rstudio-document")
View(r)
View(r)
View(shape_r)
a1 <- list_lsm()
library(rgdal)
library(raster)
library(sf)
library(sp)
library(dplyr)
library(tidyr)
library(landscapemetrics)
library(ggplot2)
#rm(list = ls())
a1 <- list_lsm()
View(a1)
a1 <- list_lsm()
View(a1)
library(terra)
library(data.table)
library(dplyr)
library(raster)
library(rgdal)
library(utils)
library(rgdal)
library(sf)
library(sp)
library(tidyr)
library(ggplot2)
setwd('E:/zyf_gn/zyf_gn_2301_data');
extent_1 <- extent(c(106.4, 106.7, 29.4, 29.75)); #to_be_set
bh_1b <- raster(paste0('chongqing_bh/cq_bh4.tif')); #to_be_set
bh_2 <- crop(bh_1b, extent_1) #to_be_set
f_buffer <- 1000
f_buffer_2 <- paste0('2301_cq_water_b12_buf', f_buffer, '_a01.shp')
f_grid_0 <- shapefile(paste0('ppa_2301_k2/shp/2/', f_buffer_2)); #to_be_set
f_grid_1 <- spTransform(f_grid_0, '+init=epsg:4326')
f_grid_len <- length(f_grid_1);
f_ii <- 1
f_ii <- 1
fc_bh_3 <- crop(bh_2, f_grid_1[f_ii, ]);
fc_bh_4 <- mask(fc_bh_3, f_grid_1[f_ii, ]);
plot(fc_bh_4)
f_ii <- 2
fc_bh_3 <- crop(bh_2, f_grid_1[f_ii, ]);
fc_bh_4 <- mask(fc_bh_3, f_grid_1[f_ii, ]);
plot(fc_bh_4)
f_ii <- 1
fc_bh_3 <- crop(bh_2, f_grid_1[f_ii, ]);
fc_bh_4 <- mask(fc_bh_3, f_grid_1[f_ii, ]);
plot(fc_bh_4)
plot(f_grid_1, add = T)
f_ii <- 2
fc_bh_3 <- crop(bh_2, f_grid_1[f_ii, ]);
fc_bh_4 <- mask(fc_bh_3, f_grid_1[f_ii, ]);
plot(fc_bh_4)
plot(f_grid_1, add = T)
fc_bh_5 <- getValues(fc_bh_4);
fc_bh_6 <- na.omit(fc_bh_5);
fc_bh_7 <- ifelse(is.na(fc_bh_5), 0, fc_bh_5);
fc_bh_5 <- na.omit(getValues(fc_bh_4));
fc_bh_6 <- na.omit(fc_bh_5);
fc_bh_7 <- fc_bh_6[fc_bh_6 != 0]
fc_bh_7 <- fc_bh_6[fc_bh_6 != 0]
fc_bh_7max <- max(fc_bh_7)
fc_bh_6_len <- length(fc_bh_6)
fc_bh_7_len <- length(fc_bh_7)
fc_bh_max <- max(fc_bh_6)
fc_bh_sum <- sum(fc_bh_7)
a1 <- list_lsm()
View(a1)
library(PerformanceAnalytics)
library(car)
#input data
setwd("E:/zyf_gy/zyf_gy_2304_work/tool_codes_k1/R_lesson_youtube_2023a")
data_1 <- read.csv("housing_data.csv")
data_2 = data_1[,-1]
#correlation table
cor_1 <- cor(data_2)
#plot data
plot(data_2)
chart.Correlation(data_2, method = "pearson", pch = 19, col = "blue", tl.cex = 1.2)
#build multiple linear model
model = lm(log(price)~sqft.living+bedrooms+bathrooms,data = data_2)
model
#回归诊断
par(mfrow=c(2,2))
plot(model)
hist(log(data_2$price))
#解释beta
par(mfrow=c(1,1))
bathrooms <- 1:10
bedrooms <- rep(mean(data_2$bedrooms), 10)
sqft.living <- rep(mean(data_2$sqft.living), 10)
dat.new <- data.frame(bedrooms, bathrooms, sqft.living)
plot(bathrooms, exp(predict(model, newdata = dat.new)), type="l", lwd=3, ylab="price", xlab="bathrooms", cex.lab=2)
#研究X变量是否都显著
model_sum <- summary(model)
model_anova <- anova(model)
VIF_2 <- vif(model)
